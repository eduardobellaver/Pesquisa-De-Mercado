<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesquisa de Mercado - Segmento de Software</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f9fafb;
            color: #1f2937;
            line-height: 1.6;
        }
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        h1 {
            text-align: center;
            font-size: 2rem;
            font-weight: 400;
            color: #1f2937;
            margin-bottom: 2rem;
            position: relative;
        }
        @media (min-width: 768px) {
            h1 { font-size: 2.25rem; }
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .stat-card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .stat-value {
            background-color: #dbeafe;
            padding: 1rem 1.5rem;
            font-size: 1.25rem;
            font-weight: 300;
            color: #374151;
        }
        @media (min-width: 768px) {
            .stat-value { font-size: 1.5rem; }
        }
        .stat-label {
            padding: 1rem 1.5rem;
        }
        .stat-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }
        .stat-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
        }
        .chart-container {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .chart-title {
            font-size: 1.125rem;
            font-weight: 400;
            color: #374151;
            margin-bottom: 1.5rem;
        }
        @media (min-width: 768px) {
            .chart-title { font-size: 1.25rem; }
        }
        .chart-wrapper {
            position: relative;
            height: 400px;
        }
        .chart-wrapper-tall {
            position: relative;
            height: 500px;
        }
        .charts-row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        @media (min-width: 1024px) {
            .charts-row {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        .footer {
            text-align: center;
            font-size: 0.875rem;
            color: #6b7280;
            padding: 1rem 0 2rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Pesquisa de Mercado - Segmento de Software</h1>
        
        <!-- Top Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">R$ 29.297.681.130,26</div>
                <div class="stat-label">
                    <div class="stat-title">Valor total</div>
                    <div class="stat-subtitle">Quantidade total homologada</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-value">504.118.442</div>
                <div class="stat-label">
                    <div class="stat-title">Itens vendidos</div>
                    <div class="stat-subtitle">Quantidade total</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-value">4.925</div>
                <div class="stat-label">
                    <div class="stat-title">Empresas vencedoras</div>
                    <div class="stat-subtitle">Quantidade total</div>
                </div>
            </div>
        </div>

        <!-- Bottom Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">R$ 12.178.661.520,00</div>
                <div class="stat-label">
                    <div class="stat-title">Maior valor</div>
                    <div class="stat-subtitle">Quantidade total única homologada</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-value">R$ 13.177.734.290,87</div>
                <div class="stat-label">
                    <div class="stat-title">SC</div>
                    <div class="stat-subtitle">Principal estado</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-value">R$ 12.831.331.029,21</div>
                <div class="stat-label">
                    <div class="stat-title">CENTRO DE INFORMÁTICA E AUTOMAÇÃO DO ESTADO DE SC S/A</div>
                    <div class="stat-subtitle">Principal empresa vencedora</div>
                </div>
            </div>
        </div>

        <!-- Timeline Chart -->
        <div class="chart-container">
            <h2 class="chart-title">Evolução temporal</h2>
            <div class="chart-wrapper">
                <canvas id="timelineChart"></canvas>
            </div>
        </div>

        <!-- State Chart -->
        <div class="chart-container">
            <h2 class="chart-title">Total Homologado (R$) por Estado</h2>
            <div class="chart-wrapper-tall">
                <canvas id="stateChart"></canvas>
            </div>
        </div>

        <!-- Top 10 Organizations -->
        <div class="chart-container">
            <h2 class="chart-title">Total Homologado (R$) pelos Top 10 Órgãos</h2>
            <div class="chart-wrapper-tall">
                <canvas id="orgsChart"></canvas>
            </div>
        </div>

        <!-- Top 15 Services -->
        <div class="chart-container">
            <h2 class="chart-title">Total Homologado (R$) pelos Top 15 Itens</h2>
            <div class="chart-wrapper-tall">
                <canvas id="servicesChart"></canvas>
            </div>
        </div>

        <!-- Company Charts Row -->
        <div class="charts-row">
            <div class="chart-container">
                <h2 class="chart-title">Total Homologado (R$) por Empresa</h2>
                <div class="chart-wrapper">
                    <canvas id="companyBarChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h2 class="chart-title">% do Total Homologado por Empresa</h2>
                <div class="chart-wrapper">
                    <canvas id="companyPieChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Organizations Pie Chart -->
        <div class="chart-container">
            <h2 class="chart-title">% do Total Homologado por Órgãos</h2>
            <div class="chart-wrapper-tall">
                <canvas id="orgsPieChart"></canvas>
            </div>
        </div>

        <div class="footer">
            <p>Pesquisa pública. Informações retiradas do Portal Nacional de Contratações Públicas.</p>
        </div>
    </div>

    <script>
        const formatCurrency = (value) => {
            if (value >= 1000000000) return 'R$ ' + (value / 1000000000).toFixed(1) + ' B';
            return 'R$ ' + (value / 1000000).toFixed(0) + ' M';
        };

        // Data
        const timelineLabels = ['10/23', '11/23', '12/23', '1/24', '2/24', '3/24', '4/24', '5/24', '6/24', '7/24', '8/24', '9/24', '10/24', '11/24', '12/24', '1/25', '2/25', '3/25', '4/25', '5/25', '6/25', '7/25', '8/25', '9/25', '10/25'];
        const itemsData = [5000000, 8000000, 12000000, 10000000, 5000000, 8000000, 15000000, 50000000, 8000000, 180000000, 280000000, 100000000, 45000000, 35000000, 25000000, 20000000, 18000000, 15000000, 12000000, 35000000, 28000000, 22000000, 18000000, 15000000, 12000000];
        const valuesData = [100000000, 200000000, 400000000, 300000000, 100000000, 200000000, 800000000, 3000000000, 200000000, 6000000000, 13000000000, 3500000000, 2000000000, 1500000000, 800000000, 600000000, 500000000, 400000000, 300000000, 1200000000, 900000000, 700000000, 500000000, 400000000, 300000000];

        const stateLabels = ['SC', 'DF', 'SP', 'RJ', 'MG', 'RS', 'PR', 'BA', 'PE', 'CE'];
        const stateValues = [13177734290.87, 5200000000, 3800000000, 2100000000, 1500000000, 1200000000, 900000000, 600000000, 450000000, 370000000];
        const stateColors = ['#1E40AF', '#22C55E', '#DC2626', '#EAB308', '#A78BFA', '#3B82F6', '#F97316', '#FFC0CB', '#7C9CB5', '#10B981'];

        const companyLabels = ['CENTRO DE...', 'EMPRESA DE...', 'SMART CITI...', 'BRASOFTWAR...', 'ATECH - NE...', 'EXTREME DI...', 'TECHBIZ FO...', 'COMPANHIA...', 'SERVICO FE...', 'RESOURCE T...'];
        const companyFullNames = ['CENTRO DE INFORMÁTICA E AUTOMAÇÃO DO ESTADO DE SC S/A', 'EMPRESA DE TECNOLOGIA E INFORMAÇÕES DA PREVIDÊNCIA', 'SMART CITIZEN DESENVOLVIMENTO E LICENCIAMENTO DE SOFTWARE LTDA', 'BRASOFTWARE INFORMÁTICA LTDA', 'ATECH - NEGÓCIOS EM TECNOLOGIAS S.A.', 'EXTREME DIGITAL EXPERIENCE LTDA', 'TECHBIZ FORENSE DIGITAL LTDA', 'COMPANHIA DE PROCESSAMENTO DE DADOS DO ESTADO DE SÃO PAULO - PRODESP', 'SERVIÇO FEDERAL DE PROCESSAMENTO DE DADOS (SERPRO)', 'RESOURCE TECNOLOGIA E INFORMÁTICA LTDA'];
        const companyValues = [12831331029.21, 2700000000, 2000000000, 1700000000, 500000000, 400000000, 350000000, 300000000, 280000000, 250000000];
        const companyColors = ['#FFC0CB', '#1E40AF', '#22C55E', '#7C9CB5', '#DC2626', '#EAB308', '#A78BFA', '#3B82F6', '#000000', '#F97316'];
        const companyPercentages = [43.8, 13.5, 10.2, 8.5, 6.8, 5.2, 4.1, 3.5, 2.8, 1.6];

        const orgsLabels = ['Secretaria...', 'Ministério...', 'Tribunal...', 'Receita...', 'INSS', 'Polícia...', 'Ministério...', 'Dataprev', 'Caixa...', 'Banco...'];
        const orgsFullNames = ['Secretaria de Estado da Fazenda de Santa Catarina', 'Ministério da Economia', 'Tribunal de Contas da União', 'Receita Federal do Brasil', 'Instituto Nacional do Seguro Social', 'Polícia Federal', 'Ministério da Justiça', 'Empresa de Tecnologia e Informações da Previdência', 'Caixa Econômica Federal', 'Banco do Brasil'];
        const orgsValues = [8500000000, 4200000000, 3100000000, 2800000000, 2400000000, 1900000000, 1600000000, 1300000000, 1100000000, 950000000];
        const orgsColors = ['#1E40AF', '#22C55E', '#DC2626', '#EAB308', '#A78BFA', '#3B82F6', '#F97316', '#FFC0CB', '#7C9CB5', '#10B981'];
        const orgsPercentages = [29.0, 14.3, 10.6, 9.5, 8.2, 6.5, 5.5, 4.4, 3.8, 3.2, 5.0];
        const orgsPieLabels = [...orgsFullNames, 'Outros'];
        const orgsPieColors = [...orgsColors, '#94A3B8'];

        const servicesLabels = ['Licença...', 'Serviço...', 'Manutenção...', 'Consultoria...', 'Hospedagem...', 'Suporte...', 'Integração...', 'Segurança...', 'Backup...', 'Treinamento...', 'Analytics...', 'Mobile...', 'IoT...', 'AI/ML...', 'Blockchain...'];
        const servicesFullNames = ['Licença de uso de software de gestão empresarial', 'Serviço de desenvolvimento de sistemas', 'Manutenção de software', 'Consultoria em tecnologia da informação', 'Hospedagem de aplicações em nuvem', 'Suporte técnico especializado', 'Integração de sistemas', 'Segurança da informação', 'Backup e recuperação de dados', 'Treinamento de usuários', 'Análise de dados e BI', 'Desenvolvimento de aplicativos móveis', 'Soluções de Internet das Coisas', 'Inteligência Artificial e Machine Learning', 'Soluções em Blockchain'];
        const servicesValues = [6500000000, 4800000000, 3200000000, 2900000000, 2100000000, 1800000000, 1500000000, 1300000000, 1100000000, 950000000, 800000000, 650000000, 500000000, 400000000, 300000000];
        const servicesColors = ['#1E40AF', '#22C55E', '#DC2626', '#EAB308', '#A78BFA', '#3B82F6', '#F97316', '#FFC0CB', '#7C9CB5', '#10B981', '#EC4899', '#8B5CF6', '#14B8A6', '#F59E0B', '#6366F1'];

        // Timeline Chart
        new Chart(document.getElementById('timelineChart'), {
            type: 'line',
            data: {
                labels: timelineLabels,
                datasets: [{
                    label: 'Qtd. de itens vendidos',
                    data: itemsData,
                    borderColor: '#FFC0CB',
                    backgroundColor: 'rgba(255, 192, 203, 0.1)',
                    borderWidth: 2,
                    yAxisID: 'y1',
                    tension: 0.3
                }, {
                    label: 'Valor total itens vendidos',
                    data: valuesData,
                    borderColor: '#1E40AF',
                    backgroundColor: 'rgba(30, 64, 175, 0.1)',
                    borderWidth: 2,
                    yAxisID: 'y',
                    tension: 0.3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                scales: {
                    y: {
                        type: 'linear',
                        position: 'left',
                        ticks: { callback: value => formatCurrency(value) }
                    },
                    y1: {
                        type: 'linear',
                        position: 'right',
                        grid: { drawOnChartArea: false }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: ctx => {
                                let label = ctx.dataset.label || '';
                                if (label) label += ': ';
                                label += ctx.datasetIndex === 1 ? formatCurrency(ctx.parsed.y) : ctx.parsed.y.toLocaleString('pt-BR');
                                return label;
                            }
                        }
                    }
                }
            }
        });

        // State Chart
        new Chart(document.getElementById('stateChart'), {
            type: 'bar',
            data: {
                labels: stateLabels,
                datasets: [{
                    label: 'Valor Total',
                    data: stateValues,
                    backgroundColor: stateColors
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: { label: ctx => formatCurrency(ctx.parsed.x) }
                    }
                },
                scales: {
                    x: { ticks: { callback: value => formatCurrency(value) } }
                }
            }
        });

        // Organizations Chart
        new Chart(document.getElementById('orgsChart'), {
            type: 'bar',
            data: {
                labels: orgsLabels,
                datasets: [{
                    label: 'Valor Total',
                    data: orgsValues,
                    backgroundColor: orgsColors
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: ctx => orgsFullNames[ctx[0].dataIndex],
                            label: ctx => formatCurrency(ctx.parsed.x)
                        }
                    }
                },
                scales: {
                    x: { ticks: { callback: value => formatCurrency(value) } }
                }
            }
        });

        // Services Chart
        new Chart(document.getElementById('servicesChart'), {
            type: 'bar',
            data: {
                labels: servicesLabels,
                datasets: [{
                    label: 'Valor Total',
                    data: servicesValues,
                    backgroundColor: servicesColors
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: ctx => servicesFullNames[ctx[0].dataIndex],
                            label: ctx => formatCurrency(ctx.parsed.x)
                        }
                    }
                },
                scales: {
                    x: { ticks: { callback: value => formatCurrency(value) } }
                }
            }
        });

        // Company Bar Chart
        new Chart(document.getElementById('companyBarChart'), {
            type: 'bar',
            data: {
                labels: companyLabels,
                datasets: [{
                    label: 'Valor Total',
                    data: companyValues,
                    backgroundColor: companyColors
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: ctx => companyFullNames[ctx[0].dataIndex],
                            label: ctx => formatCurrency(ctx.parsed.x)
                        }
                    }
                },
                scales: {
                    x: { ticks: { callback: value => formatCurrency(value) } }
                }
            }
        });

        // Company Pie Chart
        new Chart(document.getElementById('companyPieChart'), {
            type: 'doughnut',
            data: {
                labels: companyFullNames,
                datasets: [{
                    data: companyPercentages,
                    backgroundColor: companyColors,
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: { boxWidth: 12, font: { size: 11 } }
                    },
                    tooltip: {
                        callbacks: { label: ctx => ctx.label + ': ' + ctx.parsed + '%' }
                    }
                }
            }
        });

        // Organizations Pie Chart
        new Chart(document.getElementById('orgsPieChart'), {
            type: 'doughnut',
            data: {
                labels: orgsPieLabels,
                datasets: [{
                    data: orgsPercentages,
                    backgroundColor: orgsPieColors,
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: { boxWidth: 12, font: { size: 11 } }
                    },
                    tooltip: {
                        callbacks: { label: ctx => ctx.label + ': ' + ctx.parsed + '%' }
                    }
                }
            }
        });
    </script>
</body>
</html>
