<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesquisa de Mercado - Segmento de Software</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen p-4 md:p-8">
        <div class="max-w-7xl mx-auto">
            <!-- Header -->
            <div class="mb-8">
                <h1 class="text-2xl md:text-3xl font-normal text-gray-800 text-center mb-8">
                    Pesquisa de Mercado - Segmento de Software
                </h1>
                
                <!-- Top Stats -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                        <div class="bg-blue-100 px-6 py-4">
                            <p class="text-xl md:text-2xl font-light text-gray-700">R$ 29.297.681.130,26</p>
                        </div>
                        <div class="px-6 py-4">
                            <p class="text-base font-semibold text-gray-800">Valor total</p>
                            <p class="text-sm text-gray-600">Quantidade total homologada</p>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                        <div class="bg-blue-100 px-6 py-4">
                            <p class="text-xl md:text-2xl font-light text-gray-700">504.118.442</p>
                        </div>
                        <div class="px-6 py-4">
                            <p class="text-base font-semibold text-gray-800">Itens vendidos</p>
                            <p class="text-sm text-gray-600">Quantidade total</p>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                        <div class="bg-blue-100 px-6 py-4">
                            <p class="text-xl md:text-2xl font-light text-gray-700">4.925</p>
                        </div>
                        <div class="px-6 py-4">
                            <p class="text-base font-semibold text-gray-800">Empresas vencedoras</p>
                            <p class="text-sm text-gray-600">Quantidade total</p>
                        </div>
                    </div>
                </div>

                <!-- Bottom Stats -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                        <div class="bg-blue-100 px-6 py-4">
                            <p class="text-xl md:text-2xl font-light text-gray-700">R$ 12.178.661.520,00</p>
                        </div>
                        <div class="px-6 py-4">
                            <p class="text-base font-semibold text-gray-800">Maior valor</p>
                            <p class="text-sm text-gray-600">Quantidade total única homologada</p>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                        <div class="bg-blue-100 px-6 py-4">
                            <p class="text-xl md:text-2xl font-light text-gray-700">R$ 13.177.734.290,87</p>
                        </div>
                        <div class="px-6 py-4">
                            <p class="text-base font-semibold text-gray-800">SC</p>
                            <p class="text-sm text-gray-600">Principal estado</p>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                        <div class="bg-blue-100 px-6 py-4">
                            <p class="text-xl md:text-2xl font-light text-gray-700">R$ 12.831.331.029,21</p>
                        </div>
                        <div class="px-6 py-4">
                            <p class="text-base font-semibold text-gray-800">CENTRO DE INFORMÁTICA E AUTOMAÇÃO DO ESTADO DE SC S/A</p>
                            <p class="text-sm text-gray-600">Principal empresa vencedora</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timeline Chart -->
            <div class="bg-white rounded-lg shadow-sm p-4 md:p-6 mb-8">
                <h2 class="text-lg md:text-xl font-normal text-gray-700 mb-6">Evolução temporal</h2>
                <div class="relative" style="height: 400px;">
                    <canvas id="timelineChart"></canvas>
                </div>
            </div>

            <!-- Bar and Pie Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white rounded-lg shadow-sm p-4 md:p-6">
                    <h2 class="text-lg md:text-xl font-normal text-gray-700 mb-6">Total Homologado (R$) por Empresa</h2>
                    <div class="relative" style="height: 400px;">
                        <canvas id="companyBarChart"></canvas>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-sm p-4 md:p-6">
                    <h2 class="text-lg md:text-xl font-normal text-gray-700 mb-6">% do Total Homologado por Empresa</h2>
                    <div class="relative" style="height: 400px;">
                        <canvas id="companyPieChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="mt-8 text-center text-sm text-gray-600 pb-4">
                <p>Pesquisa pública. Informações retiradas do Portal Nacional de Contratações Públicas.</p>
            </div>
        </div>
    </div>

    <script>
        // Data
        const timelineData = {
            labels: ['10/2023', '11/2023', '12/2023', '1/2024', '2/2024', '3/2024', '4/2024', '5/2024', '6/2024', '7/2024', '8/2024', '9/2024', '10/2024', '11/2024', '12/2024', '1/2025', '2/2025', '3/2025', '4/2025', '5/2025', '6/2025', '7/2025', '8/2025', '9/2025', '10/2025'],
            items: [5000000, 8000000, 12000000, 10000000, 5000000, 8000000, 15000000, 50000000, 8000000, 180000000, 280000000, 100000000, 45000000, 35000000, 25000000, 20000000, 18000000, 15000000, 12000000, 35000000, 28000000, 22000000, 18000000, 15000000, 12000000],
            values: [100000000, 200000000, 400000000, 300000000, 100000000, 200000000, 800000000, 3000000000, 200000000, 6000000000, 13000000000, 3500000000, 2000000000, 1500000000, 800000000, 600000000, 500000000, 400000000, 300000000, 1200000000, 900000000, 700000000, 500000000, 400000000, 300000000]
        };

        const companyData = {
            labels: ['CENTRO DE...', 'EMPRESA DE...', 'SMART CITI...', 'BRASOFTWAR...', 'ATECH - NE...', 'EXTREME DI...', 'TECHBIZ FO...', 'COMPANHIA...', 'SERVICO FE...', 'RESOURCE T...'],
            fullNames: ['CENTRO DE INFORMÁTICA E AUTOMAÇÃO DO ESTADO DE SC S/A', 'EMPRESA DE TECNOLOGIA E INFORMAÇÕES DA PREVIDÊNCIA', 'SMART CITIZEN DESENVOLVIMENTO E LICENCIAMENTO DE SOFTWARE LTDA', 'BRASOFTWARE INFORMÁTICA LTDA', 'ATECH - NEGÓCIOS EM TECNOLOGIAS S.A.', 'EXTREME DIGITAL EXPERIENCE LTDA', 'TECHBIZ FORENSE DIGITAL LTDA', 'COMPANHIA DE PROCESSAMENTO DE DADOS DO ESTADO DE SÃO PAULO - PRODESP', 'SERVIÇO FEDERAL DE PROCESSAMENTO DE DADOS (SERPRO)', 'RESOURCE TECNOLOGIA E INFORMÁTICA LTDA'],
            values: [12831331029.21, 2700000000, 2000000000, 1700000000, 500000000, 400000000, 350000000, 300000000, 280000000, 250000000],
            percentages: [43.8, 13.5, 10.2, 8.5, 6.8, 5.2, 4.1, 3.5, 2.8, 1.6],
            colors: ['#FFC0CB', '#1E40AF', '#22C55E', '#7C9CB5', '#DC2626', '#EAB308', '#A78BFA', '#3B82F6', '#000000', '#F97316']
        };

        // Helper function
        function formatCurrency(value) {
            if (value >= 1000000000) {
                return 'R$ ' + (value / 1000000000).toFixed(1) + ' B';
            }
            return 'R$ ' + (value / 1000000).toFixed(0) + ' M';
        }

        // Timeline Chart
        const timelineCtx = document.getElementById('timelineChart').getContext('2d');
        new Chart(timelineCtx, {
            type: 'line',
            data: {
                labels: timelineData.labels,
                datasets: [{
                    label: 'Qtd. de itens vendidos',
                    data: timelineData.items,
                    borderColor: '#FFC0CB',
                    backgroundColor: 'rgba(255, 192, 203, 0.1)',
                    borderWidth: 2,
                    yAxisID: 'y1',
                    tension: 0.3
                }, {
                    label: 'Valor total itens vendidos',
                    data: timelineData.values,
                    borderColor: '#1E40AF',
                    backgroundColor: 'rgba(30, 64, 175, 0.1)',
                    borderWidth: 2,
                    yAxisID: 'y',
                    tension: 0.3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false
                },
                scales: {
                    y: {
                        type: 'linear',
                        position: 'left',
                        ticks: {
                            callback: function(value) {
                                return formatCurrency(value);
                            }
                        }
                    },
                    y1: {
                        type: 'linear',
                        position: 'right',
                        grid: {
                            drawOnChartArea: false
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.datasetIndex === 1) {
                                    label += formatCurrency(context.parsed.y);
                                } else {
                                    label += context.parsed.y.toLocaleString('pt-BR');
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });

        // Bar Chart
        const barCtx = document.getElementById('companyBarChart').getContext('2d');
        new Chart(barCtx, {
            type: 'bar',
            data: {
                labels: companyData.labels,
                datasets: [{
                    label: 'Valor Total',
                    data: companyData.values,
                    backgroundColor: companyData.colors,
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return companyData.fullNames[context[0].dataIndex];
                            },
                            label: function(context) {
                                return formatCurrency(context.parsed.x);
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: {
                            callback: function(value) {
                                return formatCurrency(value);
                            }
                        }
                    }
                }
            }
        });

        // Pie Chart
        const pieCtx = document.getElementById('companyPieChart').getContext('2d');
        new Chart(pieCtx, {
            type: 'doughnut',
            data: {
                labels: companyData.fullNames,
                datasets: [{
                    data: companyData.percentages,
                    backgroundColor: companyData.colors,
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            boxWidth: 12,
                            font: {
                                size: 11
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + '%';
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
